function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=_superPropBase(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(l){n=!0,a=l}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{VdGn:function(e,t,i){"use strict";i.r(t);var r,n,a,s,o=i("PCNd"),l=i("fXoL"),c=i("3Pt+"),h=i("ofXK"),u=new l.q("config"),p=new l.q("NEW_CONFIG"),f=new l.q("INITIAL_CONFIG"),m={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:".",clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},d=["Hh:m0:s0","Hh:m0","m0:s0"],k=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"],v=((s=function(){function e(t){var i=this;_classCallCheck(this,e),this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=function(e,t,r,n){var a=e.split(r),s=a.length>1?"".concat(r).concat(a[1]):"",o=a[0],l=i.separatorLimit.replace(/\s/g,"");l&&+l&&(o="-"===o[0]?"-".concat(o.slice(1,o.length).slice(0,l.length)):o.slice(0,l.length));for(var c=/(\d+)(\d{3})/;c.test(o);)o=o.replace(c,"$1"+t+"$2");return void 0===n?o+s:0===n?o:o+s.substr(0,n+1)},this.percentage=function(e){return Number(e)>=0&&Number(e)<=100},this.getPrecision=function(e){var t=e.split(".");return t.length>1?Number(t[t.length-1]):1/0},this.checkInputPrecision=function(e,t,r){if(t<1/0){var n=new RegExp(i._charToRegExpExpression(r)+"\\d{".concat(t,"}.*$")),a=e.match(n);a&&a[0].length-1>t?e=e.substring(0,e.length-1):0===t&&e.endsWith(r)&&(e=e.substring(0,e.length-1))}return e},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit}return _createClass(e,[{key:"applyMaskWithPattern",value:function(e,t){var i=_slicedToArray(t,2),r=i[0],n=i[1];return this.customPattern=n,this.applyMask(e,r)}},{key:"applyMask",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(null==e||void 0===t)return"";var n=0,a="",s=!1,o=!1,l=1,c=!1;e.slice(0,this.prefix.length)===this.prefix&&(e=e.slice(this.prefix.length,e.length)),this.suffix&&e.endsWith(this.suffix)&&(e=e.slice(0,e.length-this.suffix.length));var h=e.toString().split("");if("IP"===t&&(this.ipError=!!(h.filter((function(e){return"."===e})).length<3&&h.length<7),t="099.099.099.099"),t.startsWith("percent")){if(e.match("[a-z]|[A-Z]")||e.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/]/)){e=this._stripToDecimal(e);var u=this.getPrecision(t);e=this.checkInputPrecision(e,u,".")}if(e.indexOf(".")>0&&!this.percentage(e.substring(0,e.indexOf(".")))){var p=e.substring(0,e.indexOf(".")-1);e="".concat(p).concat(e.substring(e.indexOf("."),e.length))}a=this.percentage(e)?e:e.substring(0,e.length-1)}else if(t.startsWith("separator")){(e.match("[w\u0430-\u044f\u0410-\u042f]")||e.match("[\u0401\u0451\u0410-\u044f]")||e.match("[a-z]|[A-Z]")||e.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||e.match("[^A-Za-z0-9,]"))&&(e=this._stripToDecimal(e)),e=e.length>1&&"0"===e[0]&&e[1]!==this.decimalMarker?e.slice(1,e.length):e;var f=this._charToRegExpExpression(this.thousandSeparator),m=this._charToRegExpExpression(this.decimalMarker),d='@#!$%^&*()_+|~=`{}\\[\\]:\\s,";<>?\\/'.replace(f,"").replace(m,""),k=new RegExp("["+d+"]");e.match(k)&&(e=e.substring(0,e.length-1));var v=this.getPrecision(t),_=(e=this.checkInputPrecision(e,v,this.decimalMarker)).replace(new RegExp(f,"g"),""),g=(a=this._formatWithSeparators(_,this.thousandSeparator,this.decimalMarker,v)).indexOf(",")-e.indexOf(","),b=a.length-e.length;if(b>0&&","!==a[i]){o=!0;var y=0;do{this._shift.add(i+y),y++}while(y<b)}else 0!==g&&i>0&&!(a.indexOf(",")>=i&&i>3)||!(a.indexOf(".")>=i&&i>3)&&b<=0?(this._shift.clear(),o=!0,l=b,this._shift.add(i+=b)):this._shift.clear()}else for(var x=0,S=h[0];x<h.length&&n!==t.length;S=h[++x])if(this._checkSymbolMask(S,t[n])&&"?"===t[n+1])a+=S,n+=2;else if("*"===t[n+1]&&s&&this._checkSymbolMask(S,t[n+2]))a+=S,n+=3,s=!1;else if(this._checkSymbolMask(S,t[n])&&"*"===t[n+1])a+=S,s=!0;else if("?"===t[n+1]&&this._checkSymbolMask(S,t[n+2]))a+=S,n+=3;else if(this._checkSymbolMask(S,t[n])||this.hiddenInput&&this.maskAvailablePatterns[t[n]]&&this.maskAvailablePatterns[t[n]].symbol===S){if("H"===t[n]&&Number(S)>2){n+=1;var C=/[*?]/g.test(t.slice(0,n))?h.length:n;this._shift.add(C+this.prefix.length||0),x--;continue}if("h"===t[n]&&"2"===a&&Number(S)>3){n+=1,x--;continue}if("m"===t[n]&&Number(S)>5){n+=1;var w=/[*?]/g.test(t.slice(0,n))?h.length:n;this._shift.add(w+this.prefix.length||0),x--;continue}if("s"===t[n]&&Number(S)>5){n+=1;var M=/[*?]/g.test(t.slice(0,n))?h.length:n;this._shift.add(M+this.prefix.length||0),x--;continue}var E=31;if("d"===t[n]&&(Number(e.slice(n,n+2))>E||"/"===e[n+1])){n+=1;var O=/[*?]/g.test(t.slice(0,n))?h.length:n;this._shift.add(O+this.prefix.length||0),x--;continue}if("M"===t[n]){var P=12,V=0===n&&(Number(S)>2||Number(e.slice(n,n+2))>P||"/"===e[n+1]),I=e.slice(n-3,n-1).includes("/")&&("/"===e[n-2]&&Number(e.slice(n-1,n+1))>P&&"/"!==e[n]||"/"===e[n]||"/"===e[n-3]&&Number(e.slice(n-2,n))>P&&"/"!==e[n-1]||"/"===e[n-1]),A=Number(e.slice(n-3,n-1))<=E&&!e.slice(n-3,n-1).includes("/")&&"/"===e[n-1]&&(Number(e.slice(n,n+2))>P||"/"===e[n+1]),T=Number(e.slice(n-3,n-1))>E&&!e.slice(n-3,n-1).includes("/")&&!e.slice(n-2,n).includes("/")&&Number(e.slice(n-2,n))>P,j=Number(e.slice(n-3,n-1))<=E&&!e.slice(n-3,n-1).includes("/")&&"/"!==e[n-1]&&Number(e.slice(n-1,n+1))>P;if(V||I||A||T||j){n+=1;var N=/[*?]/g.test(t.slice(0,n))?h.length:n;this._shift.add(N+this.prefix.length||0),x--;continue}}a+=S,n++}else if(-1!==this.maskSpecialCharacters.indexOf(t[n])){a+=t[n],n++;var R=/[*?]/g.test(t.slice(0,n))?h.length:n;this._shift.add(R+this.prefix.length||0),x--}else this.maskSpecialCharacters.indexOf(S)>-1&&this.maskAvailablePatterns[t[n]]&&this.maskAvailablePatterns[t[n]].optional?(h[n]&&"099.099.099.099"!==t&&(a+=h[n]),n++,x--):"*"===this.maskExpression[n+1]&&this._findSpecialChar(this.maskExpression[n+2])&&this._findSpecialChar(S)===this.maskExpression[n+2]&&s?(n+=3,a+=S):"?"===this.maskExpression[n+1]&&this._findSpecialChar(this.maskExpression[n+2])&&this._findSpecialChar(S)===this.maskExpression[n+2]&&s?(n+=3,a+=S):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(S)<0&&S!==this.placeHolderCharacter&&(c=!0);a.length+1===t.length&&-1!==this.maskSpecialCharacters.indexOf(t[t.length-1])&&(a+=t[t.length-1]);for(var H=i+1;this._shift.has(H);)l++,H++;var $=this._shift.has(i)?l:0;c&&$--,r($,o),l<0&&this._shift.clear();var L="".concat(this.prefix).concat(a).concat(this.suffix);return 0===a.length&&(L="".concat(this.prefix).concat(a)),L}},{key:"_findSpecialChar",value:function(e){return this.maskSpecialCharacters.find((function(t){return t===e}))}},{key:"_checkSymbolMask",value:function(e,t){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[t]&&this.maskAvailablePatterns[t].pattern&&this.maskAvailablePatterns[t].pattern.test(e)}},{key:"_stripToDecimal",value:function(e){return e.split("").filter((function(e,t){return e.match("^-?\\d")||"."===e||","===e||"-"===e&&0===t})).join("")}},{key:"_charToRegExpExpression",value:function(e){return" "===e?"\\s":"[\\^$.|?*+()".indexOf(e)>=0?"\\"+e:e}}]),e}()).\u0275fac=function(e){return new(e||s)(l.Tb(u))},s.\u0275prov=l.Gb({token:s,factory:s.\u0275fac}),s),_=((a=function(e){function t(e,i,r,n){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i))).document=e,a._config=i,a._elementRef=r,a._renderer=n,a.maskExpression="",a.isNumberValue=!1,a.showMaskTyped=!1,a.placeHolderCharacter="_",a.maskIsShown="",a.selStart=null,a.selEnd=null,a.onChange=function(e){},a._formElement=a._elementRef.nativeElement,a}return _inherits(t,e),_createClass(t,[{key:"applyMask",value:function(e,i){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(!i)return e;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(e||"#")),!e&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;var s=e&&"number"==typeof this.selStart?e[this.selStart]:"",o="";if(void 0!==this.hiddenInput){var l=this.actualValue.split("");""!==e&&l.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(e.length>l.length?l.splice(this.selStart,0,s):e.length<l.length&&(l.length-e.length==1?l.splice(this.selStart-1,1):l.splice(this.selStart,this.selEnd-this.selStart))):l=[],o=this.actualValue.length?this.shiftTypedSymbols(l.join("")):e}o=Boolean(o)&&o.length?o:e;var c=_get(_getPrototypeOf(t.prototype),"applyMask",this).call(this,o,i,n,a);if(this.actualValue=this.getActualValue(c),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter((function(e){return e!==r.decimalMarker}))),this.formControlResult(c),!this.showMaskTyped)return this.hiddenInput&&c&&c.length?this.hideInput(c,this.maskExpression):c;var h=this.prefix+this.maskIsShown;return c+("IP"===this.maskExpression?h:h.slice(c.length))}},{key:"applyValueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._formElement.value=this.applyMask(this._formElement.value,this.maskExpression,e,t),this._formElement!==this.document.activeElement&&this.clearIfNotMatchFn()}},{key:"hideInput",value:function(e,t){var i=this;return e.split("").map((function(e,r){return i.maskAvailablePatterns&&i.maskAvailablePatterns[t[r]]&&i.maskAvailablePatterns[t[r]].symbol?i.maskAvailablePatterns[t[r]].symbol:e})).join("")}},{key:"getActualValue",value:function(e){var t=this,i=e.split("").filter((function(e,i){return t._checkSymbolMask(e,t.maskExpression[i])||t.maskSpecialCharacters.includes(t.maskExpression[i])&&e===t.maskExpression[i]}));return i.join("")===e?i.join(""):e}},{key:"shiftTypedSymbols",value:function(e){var t=this,i="";return(e&&e.split("").map((function(r,n){if(t.maskSpecialCharacters.includes(e[n+1])&&e[n+1]!==t.maskExpression[n+1])return i=r,e[n+1];if(i.length){var a=i;return i="",a}return r}))||[]).join("")}},{key:"showMaskInInput",value:function(e){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}return this.showMaskTyped?e?this._checkForIp(e):this.maskExpression.replace(/\w/g,this.placeHolderCharacter):""}},{key:"clearIfNotMatchFn",value:function(){this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==this._formElement.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(this._formElement.value,this.maskExpression))}},{key:"checkSpecialCharAmount",value:function(e){var t=this;return e.split("").filter((function(e){return t._findSpecialChar(e)})).length}},{key:"_checkForIp",value:function(e){if("#"===e)return"".concat(this.placeHolderCharacter,".").concat(this.placeHolderCharacter,".").concat(this.placeHolderCharacter,".").concat(this.placeHolderCharacter);for(var t=[],i=0;i<e.length;i++)e[i].match("\\d")&&t.push(e[i]);return t.length<=3?"".concat(this.placeHolderCharacter,".").concat(this.placeHolderCharacter,".").concat(this.placeHolderCharacter):t.length>3&&t.length<=6?"".concat(this.placeHolderCharacter,".").concat(this.placeHolderCharacter):t.length>6&&t.length<=9?this.placeHolderCharacter:""}},{key:"formControlResult",value:function(e){Array.isArray(this.dropSpecialCharacters)?this.onChange(this._removeMask(this._removeSuffix(this._removePrefix(e)),this.dropSpecialCharacters)):this.onChange(this.dropSpecialCharacters?this._checkSymbols(e):this._removeSuffix(this._removePrefix(e)))}},{key:"_removeMask",value:function(e,t){return e?e.replace(this._regExpForRemove(t),""):e}},{key:"_removePrefix",value:function(e){return this.prefix&&e?e.replace(this.prefix,""):e}},{key:"_removeSuffix",value:function(e){return this.suffix&&e?e.replace(this.suffix,""):e}},{key:"_retrieveSeparatorValue",value:function(e){return this._removeMask(this._removeSuffix(this._removePrefix(e)),this.maskSpecialCharacters)}},{key:"_regExpForRemove",value:function(e){return new RegExp(e.map((function(e){return"\\".concat(e)})).join("|"),"gi")}},{key:"_checkSymbols",value:function(e){if(""===e)return e;var t=this._retrieveSeparatorPrecision(this.maskExpression),i=this._retrieveSeparatorValue(e);return"."!==this.decimalMarker&&(i=i.replace(this.decimalMarker,".")),this.isNumberValue?t?e===this.decimalMarker?null:this._checkPrecision(this.maskExpression,i):Number(i):i}},{key:"_retrieveSeparatorPrecision",value:function(e){var t=e.match(new RegExp("^separator\\.([^d]*)"));return t?Number(t[1]):null}},{key:"_checkPrecision",value:function(e,t){return e.indexOf("2")>0?Number(t).toFixed(2):Number(t)}},{key:"formElementProperty",set:function(e){var t=_slicedToArray(e,2),i=t[0],r=t[1];this._renderer.setProperty(this._formElement,i,r)}}]),t}(v)).\u0275fac=function(e){return new(e||a)(l.Tb(h.d),l.Tb(u),l.Tb(l.l),l.Tb(l.D))},a.\u0275prov=l.Gb({token:a,factory:a.\u0275fac}),a),g=((n=function(){function e(t,i,r){_classCallCheck(this,e),this.document=t,this._maskService=i,this._config=r,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this._maskValue="",this._position=null,this.onChange=function(e){},this.onTouch=function(){}}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=e.maskExpression,i=e.specialCharacters,r=e.patterns,n=e.prefix,a=e.suffix,s=e.thousandSeparator,o=e.decimalMarker,l=e.dropSpecialCharacters,c=e.hiddenInput,h=e.showMaskTyped,u=e.placeHolderCharacter,p=e.shownMaskExpression,f=e.showTemplate,m=e.clearIfNotMatch,d=e.validation,k=e.separatorLimit;if(t&&(this._maskValue=e.maskExpression.currentValue||""),i){if(!i.currentValue||!Array.isArray(i.currentValue))return;this._maskService.maskSpecialCharacters=e.specialCharacters.currentValue||[]}r&&r.currentValue&&(this._maskService.maskAvailablePatterns=r.currentValue),n&&(this._maskService.prefix=n.currentValue),a&&(this._maskService.suffix=a.currentValue),s&&(this._maskService.thousandSeparator=s.currentValue),o&&(this._maskService.decimalMarker=o.currentValue),l&&(this._maskService.dropSpecialCharacters=l.currentValue),c&&(this._maskService.hiddenInput=c.currentValue),h&&(this._maskService.showMaskTyped=h.currentValue),u&&(this._maskService.placeHolderCharacter=u.currentValue),p&&(this._maskService.shownMaskExpression=p.currentValue),f&&(this._maskService.showTemplate=f.currentValue),m&&(this._maskService.clearIfNotMatch=m.currentValue),d&&(this._maskService.validation=d.currentValue),k&&(this._maskService.separatorLimit=k.currentValue),this._applyMask()}},{key:"validate",value:function(e){var t=this,i=e.value;if(!this._maskService.validation)return null;if(this._maskService.ipError)return{"Mask error":!0};if(this._maskValue.startsWith("separator"))return null;if(k.includes(this._maskValue))return null;if(this._maskService.clearIfNotMatch)return null;if(d.includes(this._maskValue))return this._validateTime(i);if(i&&i.toString().length>=1){var r=0,n=function(e){if(t._maskService.maskAvailablePatterns[e].optional&&!0===t._maskService.maskAvailablePatterns[e].optional){if(t._maskValue.indexOf(e)!==t._maskValue.lastIndexOf(e)?r+=t._maskValue.split("").filter((function(t){return t===e})).join("").length:-1!==t._maskValue.indexOf(e)&&r++,-1!==t._maskValue.indexOf(e)&&i.toString().length>=t._maskValue.indexOf(e))return{v:null};if(r===t._maskValue.length)return{v:null}}};for(var a in this._maskService.maskAvailablePatterns){var s=n(a);if("object"==typeof s)return s.v}if(1===this._maskValue.indexOf("{")&&i.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4)return null;if(1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&i.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&i.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return{"Mask error":!0};if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){var o=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(i.toString().length<o)return{"Mask error":!0}}}return null}},{key:"onInput",value:function(e){var t=e.target;if(this._inputValue=t.value,this._maskValue){var i=1===t.selectionStart?t.selectionStart+this._maskService.prefix.length:t.selectionStart,r=0,n=!1;if(this._maskService.applyValueChanges(i,(function(e,t){r=e,n=t})),this.document.activeElement===t){this._position=1===this._position&&1===this._inputValue.length?null:this._position;var a=this._position?this._inputValue.length+i+r:i+("Backspace"!==this._code||n?r:0);t.setSelectionRange(a,a),(this.maskExpression.includes("H")||this.maskExpression.includes("M"))&&0===r&&t.setSelectionRange(t.selectionStart+1,t.selectionStart+1),this._position=null}}else this.onChange(t.value)}},{key:"onBlur",value:function(){this._maskService.clearIfNotMatchFn(),this.onTouch()}},{key:"onFocus",value:function(e){var t=e.target;null!==t&&null!==t.selectionStart&&t.selectionStart===t.selectionEnd&&t.selectionStart>this._maskService.prefix.length&&38!==e.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),t.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===t.value?(t.focus(),t.setSelectionRange(0,0)):t.selectionStart>this._maskService.actualValue.length&&t.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));var i=t.value&&t.value!==this._maskService.prefix?t.value:this._maskService.prefix+this._maskService.maskIsShown;t.value!==i&&(t.value=i),(t.selectionStart||t.selectionEnd)<=this._maskService.prefix.length&&(t.selectionStart=this._maskService.prefix.length)}},{key:"onKeyDown",value:function(e){this._code=e.code?e.code:e.key;var t=e.target;if(this._inputValue=t.value,38===e.keyCode&&e.preventDefault(),37===e.keyCode||8===e.keyCode||46===e.keyCode){if(8===e.keyCode&&0===t.value.length&&(t.selectionStart=t.selectionEnd),8===e.keyCode&&0!==t.selectionStart)if(this.specialCharacters=this.specialCharacters||this._config.specialCharacters,this.prefix.length>1&&t.selectionStart<=this.prefix.length)t.setSelectionRange(this.prefix.length,this.prefix.length);else{if(this._inputValue.length!==t.selectionStart&&1!==t.selectionStart)for(;this.specialCharacters.includes(this._inputValue[t.selectionStart-1].toString())&&(this.prefix.length>=1&&t.selectionStart>this.prefix.length||0===this.prefix.length);)t.setSelectionRange(t.selectionStart-1,t.selectionStart-1);this.suffixCheckOnPressDelete(e.keyCode,t)}this.suffixCheckOnPressDelete(e.keyCode,t),this._maskService.prefix.length&&t.selectionStart<=this._maskService.prefix.length&&t.selectionEnd<=this._maskService.prefix.length&&e.preventDefault();var i=t.selectionStart;8!==e.keyCode||t.readOnly||0!==i||t.selectionEnd!==t.value.length||0===t.value.length||(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<t.selectionStart&&t.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),this._maskService.selStart=t.selectionStart,this._maskService.selEnd=t.selectionEnd}},{key:"writeValue",value:function(e){return t=this,r=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===e&&(e=""),"number"==typeof e&&(e=String(e),e="."!==this.decimalMarker?e.replace(".",this.decimalMarker):e,this._maskService.isNumberValue=!0),this._maskService.formElementProperty=e&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?["value",this._maskService.applyMask(e,this._maskService.maskExpression)]:["value",e],this._inputValue=e;case 1:case"end":return t.stop()}}),t,this)})),new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{o(r.next(e))}catch(t){n(t)}}function s(e){try{o(r.throw(e))}catch(t){n(t)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(a,s)}o((r=r.apply(t,[])).next())}));var t,i,r}},{key:"registerOnChange",value:function(e){this.onChange=e,this._maskService.onChange=this.onChange}},{key:"registerOnTouched",value:function(e){this.onTouch=e}},{key:"suffixCheckOnPressDelete",value:function(e,t){46===e&&this.suffix.length>0&&this._inputValue.length-this.suffix.length<=t.selectionStart&&t.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),8===e&&(this.suffix.length>1&&this._inputValue.length-this.suffix.length<t.selectionStart&&t.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),1===this.suffix.length&&this._inputValue.length===t.selectionStart&&t.setSelectionRange(t.selectionStart-1,t.selectionStart-1))}},{key:"setDisabledState",value:function(e){this._maskService.formElementProperty=["disabled",e]}},{key:"onModelChange",value:function(e){e||(this._maskService.actualValue="")}},{key:"_repeatPatternSymbols",value:function(e){var t=this;return e.match(/{[0-9]+}/)&&e.split("").reduce((function(i,r,n){if(t._start="{"===r?n:t._start,"}"!==r)return t._maskService._findSpecialChar(r)?i+r:i;t._end=n;var a=Number(e.slice(t._start+1,t._end));return i+new Array(a+1).join(e[t._start-1])}),"")||e}},{key:"_applyMask",value:function(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}},{key:"_validateTime",value:function(e){var t=this._maskValue.split("").filter((function(e){return":"!==e})).length;return 0==+e[e.length-1]&&e.length<t?{"Mask error":!0}:e.length<=t-2?{"Mask error":!0}:null}}]),e}()).\u0275fac=function(e){return new(e||n)(l.Kb(h.d),l.Kb(_),l.Kb(u))},n.\u0275dir=l.Fb({type:n,selectors:[["","mask",""]],hostBindings:function(e,t){1&e&&l.Xb("input",(function(e){return t.onInput(e)}))("blur",(function(){return t.onBlur()}))("click",(function(e){return t.onFocus(e)}))("keydown",(function(e){return t.onKeyDown(e)}))("ngModelChange",(function(e){return t.onModelChange(e)}))},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit"},features:[l.yb([{provide:c.g,useExisting:Object(l.S)((function(){return n})),multi:!0},{provide:c.f,useExisting:Object(l.S)((function(){return n})),multi:!0},_]),l.xb()]}),n),b=((r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:p,useValue:t},{provide:f,useValue:m},{provide:u,useFactory:y,deps:[f,p]},v]}}},{key:"forChild",value:function(t){return{ngModule:e}}}]),e}()).\u0275mod=l.Ib({type:r}),r.\u0275inj=l.Hb({factory:function(e){return new(e||r)}}),r);function y(e,t){return Object.assign({},e,t instanceof Function?t():t)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var x=i("tyNb"),S=i("lJxs");function C(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(e){return Object(S.a)(function(e,t){return function(i){for(var r=i,n=0;n<t;n++){var a=r[e[n]];if(void 0===a)return;r=a}return r}}(t,r))(e)}}var w=i("eIep"),M=i("vkgz"),E=i("pLZG"),O=i("JX91"),P=i("7o/Q"),V=function(){function e(t,i){_classCallCheck(this,e),this.compare=t,this.keySelector=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new I(e,this.compare,this.keySelector))}}]),e}(),I=function(e){function t(e,i,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).keySelector=r,n.hasKey=!1,"function"==typeof i&&(n.compare=i),n}return _inherits(t,e),_createClass(t,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var i=this.keySelector;t=i?i(e):e}catch(n){return this.destination.error(n)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),t}(P.a),A=i("l7GE"),T=i("ZUHj");function j(e){return function(t){return t.lift(new N(e))}}var N=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var i=new R(e),r=Object(T.a)(i,this.notifier);return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}]),e}(),R=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).seenValue=!1,i}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,i,r,n){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),t}(A.a),H=function(){function e(t,i){_classCallCheck(this,e),this.observables=t,this.project=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new $(e,this.observables,this.project))}}]),e}(),$=function(e){function t(e,i,r){var n;_classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).observables=i,n.project=r,n.toRespond=[];var a=i.length;n.values=new Array(a);for(var s=0;s<a;s++)n.toRespond.push(s);for(var o=0;o<a;o++){var l=i[o];n.add(Object(T.a)(_assertThisInitialized(n),l,l,o))}return n}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,i,r,n){this.values[i]=t;var a=this.toRespond;if(a.length>0){var s=a.indexOf(i);-1!==s&&a.splice(s,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(e){if(0===this.toRespond.length){var t=[e].concat(_toConsumableArray(this.values));this.project?this._tryProject(t):this.destination.next(t)}}},{key:"_tryProject",value:function(e){var t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}]),t}(A.a),L=i("nYR2"),D=i("2Vo4"),z=i("XNiG"),B=i("MXtB"),F=i("HDdC"),K=i("D0XW"),W=i("DH7j");function G(e){return!Object(W.a)(e)&&e-parseFloat(e)+1>=0}var X=i("z+Ro");function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,r=-1;return G(t)?r=Number(t)<1?1:Number(t):Object(X.a)(t)&&(i=t),Object(X.a)(i)||(i=K.a),new F.a((function(t){var n=G(e)?e:+e-i.now();return i.schedule(q,n,{index:0,period:r,subscriber:t})}))}function q(e){var t=e.index,i=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===i)return r.complete();e.index=t+1,this.schedule(e,i)}}var J,U=i("z6cu"),Q=((J=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"processPayment",value:function(e,t,i){var r=Z(2e3).pipe(Object(S.a)((function(){return"The payment for ".concat(t," on amount ").concat(i," RUB was successfully finished.")}))),n=Z(2e3).pipe(Object(w.a)((function(){return Object(U.a)("Something went wrong. Please try again later.")})));return Math.random()>.5?r:n}}]),e}()).\u0275fac=function(e){return new(e||J)},J.\u0275prov=l.Gb({token:J,factory:J.\u0275fac,providedIn:"root"}),J),Y=i("Ak7U"),ee=i("J6EX");function te(e,t){1&e&&(l.Pb(0,"div",10),l.Lb(1,"app-loader-icon",11),l.Ob())}function ie(e,t){if(1&e){var i=l.Qb();l.Pb(0,"form",2),l.Xb("submit",(function(){return l.fc(i),l.Zb().submit$.next()})),l.Pb(1,"div",3),l.ac(2,"async"),l.Ob(),l.Pb(3,"label",4),l.lc(4,"Phone number:"),l.Ob(),l.Lb(5,"input",5),l.Pb(6,"label",6),l.lc(7,"Payment amount (1-1000 RUB):"),l.Ob(),l.Lb(8,"input",7),l.Pb(9,"button",8),l.lc(10,"Submit"),l.Ob(),l.jc(11,te,2,0,"div",9),l.ac(12,"async"),l.Ob()}if(2&e){var r=l.Zb();l.cc("formGroup",r.form),l.zb(1),l.ic("background-image",l.bc(2,12,r.operatorLogo$),l.Db),l.zb(4),l.Bb("refill__input_invalid",r.form.get("phoneNumber").invalid),l.cc("prefix",r.phonePrefix)("dropSpecialCharacters",!1)("showMaskTyped",!0),l.zb(3),l.Bb("refill__input_invalid",r.form.get("paymentAmount").invalid),l.cc("max",r.maxPaymentAmount),l.zb(3),l.cc("ngIf",l.bc(12,14,r.isSubmitting$))}}function re(e,t){1&e&&(l.Pb(0,"div",12),l.Lb(1,"app-loader-icon",13),l.Ob())}var ne,ae,se=[{path:":operatorName",component:(ne=function(){function e(t,i,r,n,a,s){var o=this;_classCallCheck(this,e),this.telecomOperatorsService=t,this.refillBalanceService=i,this.popupInfoService=r,this.activatedRoute=n,this.router=a,this.fb=s,this.phonePrefix="+7",this.maxPaymentAmount=1e3,this.operatorName$=this.activatedRoute.params.pipe(C("operatorName")),this.operator$=this.operatorName$.pipe(Object(w.a)((function(e){return o.telecomOperatorsService.getOperatorByName(e)})),Object(M.a)((function(e){return!e&&o.router.navigate([""])})),Object(E.a)((function(e){return!!e}))),this.areOperatorDetailsLoaded$=this.operator$.pipe(Object(S.a)((function(){return!0})),Object(O.a)(!1)),this.operatorId$=this.operator$.pipe(C("id")),this.operatorLogo$=this.operator$.pipe(C("logoUrl"),Object(S.a)((function(e){return"url(".concat(e,")")}))),this.form=this.fb.group({phoneNumber:[null,c.l.required],paymentAmount:[null,[c.l.required,c.l.min(1),c.l.max(this.maxPaymentAmount)]]}),this.isSubmitting$=new D.a(!1),this.notification$=new D.a(null),this.submit$=new z.a,this.destroy$=new z.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.form.valueChanges.pipe(C("paymentAmount"),(function(e){return e.lift(new V(void 0,void 0))}),Object(E.a)((function(t){return t>e.maxPaymentAmount})),j(this.destroy$)).subscribe((function(){return e.form.patchValue({paymentAmount:e.maxPaymentAmount})})),this.submit$.pipe(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){var i;return"function"==typeof t[t.length-1]&&(i=t.pop()),e.lift(new H(t,i))}}(this.operatorId$),j(this.destroy$)).subscribe((function(t){var i=_slicedToArray(t,2),r=(i[0],i[1]);return e.submit(r)}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"submit",value:function(e){var t=this;if(this.form.markAllAsTouched(),!this.form.invalid){var i=this.form.value,r=i.phoneNumber,n=i.paymentAmount;this.isSubmitting$.next(!0),this.refillBalanceService.processPayment(e,this.phonePrefix+r,n).pipe(Object(L.a)((function(){return t.isSubmitting$.next(!1)}))).subscribe((function(e){t.popupInfoService.success(e,5e3).closed$.subscribe((function(){return t.router.navigate(["/"])}))}),(function(e){t.popupInfoService.error(e)}))}}}]),e}(),ne.\u0275fac=function(e){return new(e||ne)(l.Kb(B.a),l.Kb(Q),l.Kb(Y.a),l.Kb(x.a),l.Kb(x.b),l.Kb(c.b))},ne.\u0275cmp=l.Eb({type:ne,selectors:[["app-refill-balance"]],decls:4,vars:4,consts:[["class","refill",3,"formGroup","submit",4,"ngIf","ngIfElse"],["loader",""],[1,"refill",3,"formGroup","submit"],[1,"refill__logo"],["for","phoneNumber",1,"refill__label"],["name","phoneNumber","formControlName","phoneNumber","type","tel","mask","(000) 000-00-00",1,"refill__input",3,"prefix","dropSpecialCharacters","showMaskTyped"],["for","paymentAmount",1,"refill__label"],["name","paymentAmount","formControlName","paymentAmount","type","number","min","1",1,"refill__input",3,"max"],["type","submit",1,"refill__submit-btn"],["class","refill__submit-overlay",4,"ngIf"],[1,"refill__submit-overlay"],[1,"refill__submit-loader"],[1,"loader"],[1,"loader__content"]],template:function(e,t){if(1&e&&(l.jc(0,ie,13,16,"form",0),l.ac(1,"async"),l.jc(2,re,2,0,"ng-template",null,1,l.kc)),2&e){var i=l.ec(3);l.cc("ngIf",l.bc(1,2,t.areOperatorDetailsLoaded$))("ngIfElse",i)}},directives:[h.j,c.m,c.i,c.d,c.a,c.h,c.c,g,c.j,ee.a],pipes:[h.b],styles:[".refill[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin:auto;max-width:300px;position:relative}@media (max-width:600px){.refill[_ngcontent-%COMP%]{max-width:100%;margin:0 50px}}.refill__logo[_ngcontent-%COMP%]{width:100%;height:100px;background-size:contain;-o-object-fit:contain;object-fit:contain;background-position:50%;background-repeat:no-repeat}.refill__label[_ngcontent-%COMP%]{display:block;margin-bottom:8px}.refill__input[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.1);border:none;font-size:16px;height:auto;outline:0;padding:15px;width:calc(100% - 30px);background-color:#e8eeef;color:#8a97a0;box-shadow:inset 0 1px 0 rgba(0,0,0,.03);margin:0 0 30px}.refill__input.ng-invalid.ng-touched[_ngcontent-%COMP%]{box-shadow:0 0 0 1px rgba(255,0,0,.5)}.refill__submit-btn[_ngcontent-%COMP%]{cursor:pointer;padding:19px 39px 18px;color:#fff;background-color:#4bc970;font-size:18px;text-align:center;font-style:normal;width:100%;border-radius:5px;border:solid #3ac162;border-width:1px 1px 3px;box-shadow:inset 0 -1px 0 hsla(0,0%,100%,.1);margin-bottom:10px}.refill__submit-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,100%,.8)}.refill__submit-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.loader[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.loader__content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}"],changeDetection:0}),ne)}],oe=((ae=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ib({type:ae}),ae.\u0275inj=l.Hb({factory:function(e){return new(e||ae)},imports:[[x.d.forChild(se)],x.d]}),ae);i.d(t,"RefillBalanceModule",(function(){return ce}));var le,ce=((le=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ib({type:le}),le.\u0275inj=l.Hb({factory:function(e){return new(e||le)},imports:[[o.a,b.forRoot(),oe]]}),le)}}]);